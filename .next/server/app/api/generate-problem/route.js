"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/generate-problem/route";
exports.ids = ["app/api/generate-problem/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-problem%2Froute&page=%2Fapi%2Fgenerate-problem%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-problem%2Froute.ts&appDir=C%3A%5CUsers%5Calexa%5CDesktop%5COttodot%5Cottodot-coding-task-full-stack%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Calexa%5CDesktop%5COttodot%5Cottodot-coding-task-full-stack&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-problem%2Froute&page=%2Fapi%2Fgenerate-problem%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-problem%2Froute.ts&appDir=C%3A%5CUsers%5Calexa%5CDesktop%5COttodot%5Cottodot-coding-task-full-stack%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Calexa%5CDesktop%5COttodot%5Cottodot-coding-task-full-stack&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_alexa_Desktop_Ottodot_ottodot_coding_task_full_stack_app_api_generate_problem_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/generate-problem/route.ts */ \"(rsc)/./app/api/generate-problem/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/generate-problem/route\",\n        pathname: \"/api/generate-problem\",\n        filename: \"route\",\n        bundlePath: \"app/api/generate-problem/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\alexa\\\\Desktop\\\\Ottodot\\\\ottodot-coding-task-full-stack\\\\app\\\\api\\\\generate-problem\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_alexa_Desktop_Ottodot_ottodot_coding_task_full_stack_app_api_generate_problem_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/generate-problem/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZnZW5lcmF0ZS1wcm9ibGVtJTJGcm91dGUmcGFnZT0lMkZhcGklMkZnZW5lcmF0ZS1wcm9ibGVtJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGZ2VuZXJhdGUtcHJvYmxlbSUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNhbGV4YSU1Q0Rlc2t0b3AlNUNPdHRvZG90JTVDb3R0b2RvdC1jb2RpbmctdGFzay1mdWxsLXN0YWNrJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNhbGV4YSU1Q0Rlc2t0b3AlNUNPdHRvZG90JTVDb3R0b2RvdC1jb2RpbmctdGFzay1mdWxsLXN0YWNrJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3dEO0FBQ3JJO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdUdBQXVHO0FBQy9HO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDNko7O0FBRTdKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWF0aC1wcm9ibGVtLWdlbmVyYXRvci8/MjA3MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxhbGV4YVxcXFxEZXNrdG9wXFxcXE90dG9kb3RcXFxcb3R0b2RvdC1jb2RpbmctdGFzay1mdWxsLXN0YWNrXFxcXGFwcFxcXFxhcGlcXFxcZ2VuZXJhdGUtcHJvYmxlbVxcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvZ2VuZXJhdGUtcHJvYmxlbS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2dlbmVyYXRlLXByb2JsZW1cIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2dlbmVyYXRlLXByb2JsZW0vcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxhbGV4YVxcXFxEZXNrdG9wXFxcXE90dG9kb3RcXFxcb3R0b2RvdC1jb2RpbmctdGFzay1mdWxsLXN0YWNrXFxcXGFwcFxcXFxhcGlcXFxcZ2VuZXJhdGUtcHJvYmxlbVxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9nZW5lcmF0ZS1wcm9ibGVtL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-problem%2Froute&page=%2Fapi%2Fgenerate-problem%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-problem%2Froute.ts&appDir=C%3A%5CUsers%5Calexa%5CDesktop%5COttodot%5Cottodot-coding-task-full-stack%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Calexa%5CDesktop%5COttodot%5Cottodot-coding-task-full-stack&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/generate-problem/route.ts":
/*!*******************************************!*\
  !*** ./app/api/generate-problem/route.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @google/generative-ai */ \"(rsc)/./node_modules/@google/generative-ai/dist/index.mjs\");\n/* harmony import */ var _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabaseClient */ \"(rsc)/./lib/supabaseClient.ts\");\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n\n\n\nconst genAI = new _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__.GoogleGenerativeAI(process.env.GOOGLE_API_KEY || \"\");\nasync function POST(request) {\n    try {\n        // Get difficulty, topic, and user_id from request body\n        const body = await request.json().catch(()=>({}));\n        const { difficulty = \"medium\", topic = null, user_id = null } = body;\n        // Validate difficulty\n        const validDifficulties = [\n            \"easy\",\n            \"medium\",\n            \"hard\"\n        ];\n        const selectedDifficulty = validDifficulties.includes(difficulty) ? difficulty : \"medium\";\n        // Generate problem using Gemini AI\n        const model = genAI.getGenerativeModel({\n            model: \"gemini-2.0-flash\"\n        });\n        // Build difficulty-specific instructions\n        const difficultyInstructions = {\n            easy: `DIFFICULTY: EASY\r\n- Use smaller numbers (within 100 for whole numbers, simple fractions like 1/2, 1/4)\r\n- Single-step problems or very simple two-step problems\r\n- Clear, straightforward contexts\r\n- Basic operations without complex reasoning`,\n            medium: `DIFFICULTY: MEDIUM\r\n- Use moderate numbers (within 10,000 for whole numbers, fractions with denominators up to 12)\r\n- Two to three-step problems\r\n- Realistic contexts requiring some analysis\r\n- May involve multiple operations or concepts`,\n            hard: `DIFFICULTY: HARD\r\n- Use larger numbers (up to 10 million for whole numbers, complex fractions)\r\n- Multi-step problems (3-4 steps)\r\n- Complex real-world scenarios requiring deeper reasoning\r\n- May involve order of operations, brackets, or multiple concepts combined`\n        };\n        const topicFilter = topic ? `\\n    REQUIRED TOPIC: Focus ONLY on \"${topic}\" problems.\\n` : \"\";\n        const prompt = `Generate a multiple choice math word problem suitable for Primary 5 students (age 10-11) following the Singapore Primary Mathematics Syllabus.\r\n\r\n    ${difficultyInstructions[selectedDifficulty]}\r\n    ${topicFilter}\r\n    CURRICULUM REQUIREMENTS - Choose ONE topic from:\r\n\r\n    NUMBER & ALGEBRA:\r\n    - Whole numbers (up to 10 million, order of operations with brackets)\r\n    - Fractions (four operations, especially multiplication by whole numbers and proper fractions)\r\n    - Decimals (multiplying/dividing by 10/100/1000, converting measurements)\r\n    - Percentage (finding percentage of whole, discount, GST, annual interest)\r\n    - Rate problems (quantity per unit of another quantity)\r\n\r\n    MEASUREMENT & GEOMETRY:\r\n    - Area of triangle (using base × height ÷ 2, composite figures)\r\n    - Volume of cube/cuboid (including liquid volume, relationship between ℓ and cm³)\r\n    - Angles (on straight lines, at points, vertically opposite, finding unknowns)\r\n    - Properties of triangles (isosceles, equilateral, right-angled, angle sum)\r\n    - Properties of quadrilaterals (parallelogram, rhombus, trapezium)\r\n\r\n    PROBLEM DESIGN PRINCIPLES:\r\n    - Use realistic, age-appropriate contexts from everyday life\r\n    - Focus on conceptual understanding, not just procedural skills\r\n    - Encourage mathematical reasoning and problem-solving\r\n    - Numbers should be within students' computational ability\r\n\r\n    IMPORTANT: First solve the problem step by step to ensure you get the correct answer.\r\n    Then create 3 plausible wrong answers (distractors) based on common student errors.\r\n\r\n    Return ONLY a valid JSON object with this exact structure (no markdown, no code blocks):\r\n    {\r\n      \"problem_text\": \"A detailed word problem in a real-world context\",\r\n      \"topic\": \"One of: Whole Numbers, Fractions, Decimals, Percentage, Rate, Area, Volume, Angles, Triangles, Quadrilaterals\",\r\n      \"difficulty\": \"${selectedDifficulty}\",\r\n      \"options\": [\r\n        {\"text\": \"Option A\", \"value\": 10},\r\n        {\"text\": \"Option B\", \"value\": 20},\r\n        {\"text\": \"Option C\", \"value\": 30},\r\n        {\"text\": \"Option D\", \"value\": 40}\r\n      ],\r\n      \"correct_answer\": 20,\r\n      \"solution_steps\": \"Clear step-by-step calculation showing working\",\r\n      \"hint\": \"A helpful hint that guides toward the solution without revealing the answer\"\r\n    }\r\n\r\n    VALIDATION CHECKLIST:\r\n    - correct_answer MUST match one option value exactly\r\n    - All option values are numbers (not strings)\r\n    - Distractors represent common misconceptions (e.g., forgetting to carry, wrong operation, partial calculation)\r\n    - Answer is mathematically CORRECT per solution_steps\r\n    - Problem text is clear, unambiguous, and age-appropriate\r\n\r\n    Example (Whole Numbers):\r\n    Problem: A school library has 2,450 books. During the book fair, they bought 385 new books and donated 127 old books to charity. How many books does the library have now?\r\n    Solution: 2,450 + 385 - 127 = 2,835 - 127 = 2,708\r\n    Options: [2,562 (forgot donation), 2,708 (correct), 2,835 (forgot subtraction), 2,958 (added all)]\r\n\r\n    Double-check your arithmetic before responding!`;\n        const result = await model.generateContent(prompt);\n        const response = await result.response;\n        const text = response.text();\n        // Parse the AI response\n        let problemData;\n        try {\n            // Clean the response - remove markdown code blocks if present\n            const cleanedText = text.replace(/```json\\n?/g, \"\").replace(/```\\n?/g, \"\").trim();\n            problemData = JSON.parse(cleanedText);\n        } catch (parseError) {\n            console.error(\"Failed to parse AI response:\", text);\n            throw new Error(\"Invalid AI response format\");\n        }\n        // Validate the response structure\n        if (!problemData.problem_text || !problemData.options || !Array.isArray(problemData.options) || problemData.options.length !== 4 || typeof problemData.correct_answer !== \"number\") {\n            throw new Error(\"Invalid problem data structure\");\n        }\n        // Validate that correct_answer matches one of the options\n        const optionValues = problemData.options.map((opt)=>opt.value);\n        if (!optionValues.includes(problemData.correct_answer)) {\n            throw new Error(\"Correct answer does not match any option\");\n        }\n        // Save to database\n        const { data: session, error: dbError } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"math_problem_sessions\").insert({\n            problem_text: problemData.problem_text,\n            correct_answer: problemData.correct_answer,\n            options: problemData.options,\n            difficulty: selectedDifficulty,\n            topic: problemData.topic || null,\n            hint_text: problemData.hint || null,\n            solution_steps: problemData.solution_steps || null,\n            user_id: user_id\n        }).select().single();\n        if (dbError) {\n            console.error(\"Database error:\", dbError);\n            throw new Error(\"Failed to save problem to database\");\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_2__[\"default\"].json({\n            session_id: session.id,\n            problem_text: session.problem_text,\n            final_answer: session.correct_answer,\n            options: session.options,\n            difficulty: session.difficulty,\n            topic: session.topic,\n            hint: session.hint_text\n        });\n    } catch (error) {\n        console.error(\"Error generating problem:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_2__[\"default\"].json({\n            error: \"Failed to generate problem. Please try again.\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2dlbmVyYXRlLXByb2JsZW0vcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUEwRDtBQUNYO0FBQ1E7QUFFdkQsTUFBTUcsUUFBUSxJQUFJSCxxRUFBa0JBLENBQUNJLFFBQVFDLEdBQUcsQ0FBQ0MsY0FBYyxJQUFJO0FBRTVELGVBQWVDLEtBQUtDLE9BQW9CO0lBQzdDLElBQUk7UUFDRix1REFBdUQ7UUFDdkQsTUFBTUMsT0FBTyxNQUFNRCxRQUFRRSxJQUFJLEdBQUdDLEtBQUssQ0FBQyxJQUFPLEVBQUM7UUFDaEQsTUFBTSxFQUFFQyxhQUFhLFFBQVEsRUFBRUMsUUFBUSxJQUFJLEVBQUVDLFVBQVUsSUFBSSxFQUFFLEdBQUdMO1FBRWhFLHNCQUFzQjtRQUN0QixNQUFNTSxvQkFBb0I7WUFBQztZQUFRO1lBQVU7U0FBTztRQUNwRCxNQUFNQyxxQkFBcUJELGtCQUFrQkUsUUFBUSxDQUFDTCxjQUFjQSxhQUFhO1FBRWpGLG1DQUFtQztRQUNuQyxNQUFNTSxRQUFRZixNQUFNZ0Isa0JBQWtCLENBQUM7WUFBRUQsT0FBTztRQUFtQjtRQUVuRSx5Q0FBeUM7UUFDekMsTUFBTUUseUJBQXlCO1lBQzdCQyxNQUFNLENBQUM7Ozs7NENBSStCLENBQUM7WUFDdkNDLFFBQVEsQ0FBQzs7Ozs2Q0FJOEIsQ0FBQztZQUN4Q0MsTUFBTSxDQUFDOzs7OzBFQUk2RCxDQUFDO1FBQ3ZFO1FBRUEsTUFBTUMsY0FBY1gsUUFBUSxDQUFDLHFDQUFxQyxFQUFFQSxNQUFNLGFBQWEsQ0FBQyxHQUFHO1FBRTNGLE1BQU1ZLFNBQVMsQ0FBQzs7SUFFaEIsRUFBRUwsc0JBQXNCLENBQUNKLG1CQUFtQixDQUFDO0lBQzdDLEVBQUVRLFlBQVk7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztxQkE4QkcsRUFBRVIsbUJBQW1COzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7bURBd0JTLENBQUM7UUFFaEQsTUFBTVUsU0FBUyxNQUFNUixNQUFNUyxlQUFlLENBQUNGO1FBQzNDLE1BQU1HLFdBQVcsTUFBTUYsT0FBT0UsUUFBUTtRQUN0QyxNQUFNQyxPQUFPRCxTQUFTQyxJQUFJO1FBRTFCLHdCQUF3QjtRQUN4QixJQUFJQztRQUNKLElBQUk7WUFDRiw4REFBOEQ7WUFDOUQsTUFBTUMsY0FBY0YsS0FBS0csT0FBTyxDQUFDLGVBQWUsSUFBSUEsT0FBTyxDQUFDLFdBQVcsSUFBSUMsSUFBSTtZQUMvRUgsY0FBY0ksS0FBS0MsS0FBSyxDQUFDSjtRQUMzQixFQUFFLE9BQU9LLFlBQVk7WUFDbkJDLFFBQVFDLEtBQUssQ0FBQyxnQ0FBZ0NUO1lBQzlDLE1BQU0sSUFBSVUsTUFBTTtRQUNsQjtRQUVBLGtDQUFrQztRQUNsQyxJQUFJLENBQUNULFlBQVlVLFlBQVksSUFBSSxDQUFDVixZQUFZVyxPQUFPLElBQUksQ0FBQ0MsTUFBTUMsT0FBTyxDQUFDYixZQUFZVyxPQUFPLEtBQ3ZGWCxZQUFZVyxPQUFPLENBQUNHLE1BQU0sS0FBSyxLQUFLLE9BQU9kLFlBQVllLGNBQWMsS0FBSyxVQUFVO1lBQ3RGLE1BQU0sSUFBSU4sTUFBTTtRQUNsQjtRQUVBLDBEQUEwRDtRQUMxRCxNQUFNTyxlQUFlaEIsWUFBWVcsT0FBTyxDQUFDTSxHQUFHLENBQUNDLENBQUFBLE1BQU9BLElBQUlDLEtBQUs7UUFDN0QsSUFBSSxDQUFDSCxhQUFhN0IsUUFBUSxDQUFDYSxZQUFZZSxjQUFjLEdBQUc7WUFDdEQsTUFBTSxJQUFJTixNQUFNO1FBQ2xCO1FBRUEsbUJBQW1CO1FBQ25CLE1BQU0sRUFBRVcsTUFBTUMsT0FBTyxFQUFFYixPQUFPYyxPQUFPLEVBQUUsR0FBRyxNQUFNbkQseURBQVFBLENBQ3JEb0QsSUFBSSxDQUFDLHlCQUNMQyxNQUFNLENBQUM7WUFDTmQsY0FBY1YsWUFBWVUsWUFBWTtZQUN0Q0ssZ0JBQWdCZixZQUFZZSxjQUFjO1lBQzFDSixTQUFTWCxZQUFZVyxPQUFPO1lBQzVCN0IsWUFBWUk7WUFDWkgsT0FBT2lCLFlBQVlqQixLQUFLLElBQUk7WUFDNUIwQyxXQUFXekIsWUFBWTBCLElBQUksSUFBSTtZQUMvQkMsZ0JBQWdCM0IsWUFBWTJCLGNBQWMsSUFBSTtZQUM5QzNDLFNBQVNBO1FBQ1gsR0FDQzRDLE1BQU0sR0FDTkMsTUFBTTtRQUVULElBQUlQLFNBQVM7WUFDWGYsUUFBUUMsS0FBSyxDQUFDLG1CQUFtQmM7WUFDakMsTUFBTSxJQUFJYixNQUFNO1FBQ2xCO1FBRUEsT0FBT3JDLGtGQUFZQSxDQUFDUSxJQUFJLENBQUM7WUFDdkJrRCxZQUFZVCxRQUFRVSxFQUFFO1lBQ3RCckIsY0FBY1csUUFBUVgsWUFBWTtZQUNsQ3NCLGNBQWNYLFFBQVFOLGNBQWM7WUFDcENKLFNBQVNVLFFBQVFWLE9BQU87WUFDeEI3QixZQUFZdUMsUUFBUXZDLFVBQVU7WUFDOUJDLE9BQU9zQyxRQUFRdEMsS0FBSztZQUNwQjJDLE1BQU1MLFFBQVFJLFNBQVM7UUFDekI7SUFFRixFQUFFLE9BQU9qQixPQUFPO1FBQ2RELFFBQVFDLEtBQUssQ0FBQyw2QkFBNkJBO1FBQzNDLE9BQU9wQyxrRkFBWUEsQ0FBQ1EsSUFBSSxDQUN0QjtZQUFFNEIsT0FBTztRQUFnRCxHQUN6RDtZQUFFeUIsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tYXRoLXByb2JsZW0tZ2VuZXJhdG9yLy4vYXBwL2FwaS9nZW5lcmF0ZS1wcm9ibGVtL3JvdXRlLnRzP2VjMGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR29vZ2xlR2VuZXJhdGl2ZUFJIH0gZnJvbSAnQGdvb2dsZS9nZW5lcmF0aXZlLWFpJ1xyXG5pbXBvcnQgeyBzdXBhYmFzZSB9IGZyb20gJ0AvbGliL3N1cGFiYXNlQ2xpZW50J1xyXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXHJcblxyXG5jb25zdCBnZW5BSSA9IG5ldyBHb29nbGVHZW5lcmF0aXZlQUkocHJvY2Vzcy5lbnYuR09PR0xFX0FQSV9LRVkgfHwgJycpXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBHZXQgZGlmZmljdWx0eSwgdG9waWMsIGFuZCB1c2VyX2lkIGZyb20gcmVxdWVzdCBib2R5XHJcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCkuY2F0Y2goKCkgPT4gKHt9KSlcclxuICAgIGNvbnN0IHsgZGlmZmljdWx0eSA9ICdtZWRpdW0nLCB0b3BpYyA9IG51bGwsIHVzZXJfaWQgPSBudWxsIH0gPSBib2R5XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgZGlmZmljdWx0eVxyXG4gICAgY29uc3QgdmFsaWREaWZmaWN1bHRpZXMgPSBbJ2Vhc3knLCAnbWVkaXVtJywgJ2hhcmQnXVxyXG4gICAgY29uc3Qgc2VsZWN0ZWREaWZmaWN1bHR5ID0gdmFsaWREaWZmaWN1bHRpZXMuaW5jbHVkZXMoZGlmZmljdWx0eSkgPyBkaWZmaWN1bHR5IDogJ21lZGl1bSdcclxuXHJcbiAgICAvLyBHZW5lcmF0ZSBwcm9ibGVtIHVzaW5nIEdlbWluaSBBSVxyXG4gICAgY29uc3QgbW9kZWwgPSBnZW5BSS5nZXRHZW5lcmF0aXZlTW9kZWwoeyBtb2RlbDogJ2dlbWluaS0yLjAtZmxhc2gnIH0pXHJcblxyXG4gICAgLy8gQnVpbGQgZGlmZmljdWx0eS1zcGVjaWZpYyBpbnN0cnVjdGlvbnNcclxuICAgIGNvbnN0IGRpZmZpY3VsdHlJbnN0cnVjdGlvbnMgPSB7XHJcbiAgICAgIGVhc3k6IGBESUZGSUNVTFRZOiBFQVNZXHJcbi0gVXNlIHNtYWxsZXIgbnVtYmVycyAod2l0aGluIDEwMCBmb3Igd2hvbGUgbnVtYmVycywgc2ltcGxlIGZyYWN0aW9ucyBsaWtlIDEvMiwgMS80KVxyXG4tIFNpbmdsZS1zdGVwIHByb2JsZW1zIG9yIHZlcnkgc2ltcGxlIHR3by1zdGVwIHByb2JsZW1zXHJcbi0gQ2xlYXIsIHN0cmFpZ2h0Zm9yd2FyZCBjb250ZXh0c1xyXG4tIEJhc2ljIG9wZXJhdGlvbnMgd2l0aG91dCBjb21wbGV4IHJlYXNvbmluZ2AsXHJcbiAgICAgIG1lZGl1bTogYERJRkZJQ1VMVFk6IE1FRElVTVxyXG4tIFVzZSBtb2RlcmF0ZSBudW1iZXJzICh3aXRoaW4gMTAsMDAwIGZvciB3aG9sZSBudW1iZXJzLCBmcmFjdGlvbnMgd2l0aCBkZW5vbWluYXRvcnMgdXAgdG8gMTIpXHJcbi0gVHdvIHRvIHRocmVlLXN0ZXAgcHJvYmxlbXNcclxuLSBSZWFsaXN0aWMgY29udGV4dHMgcmVxdWlyaW5nIHNvbWUgYW5hbHlzaXNcclxuLSBNYXkgaW52b2x2ZSBtdWx0aXBsZSBvcGVyYXRpb25zIG9yIGNvbmNlcHRzYCxcclxuICAgICAgaGFyZDogYERJRkZJQ1VMVFk6IEhBUkRcclxuLSBVc2UgbGFyZ2VyIG51bWJlcnMgKHVwIHRvIDEwIG1pbGxpb24gZm9yIHdob2xlIG51bWJlcnMsIGNvbXBsZXggZnJhY3Rpb25zKVxyXG4tIE11bHRpLXN0ZXAgcHJvYmxlbXMgKDMtNCBzdGVwcylcclxuLSBDb21wbGV4IHJlYWwtd29ybGQgc2NlbmFyaW9zIHJlcXVpcmluZyBkZWVwZXIgcmVhc29uaW5nXHJcbi0gTWF5IGludm9sdmUgb3JkZXIgb2Ygb3BlcmF0aW9ucywgYnJhY2tldHMsIG9yIG11bHRpcGxlIGNvbmNlcHRzIGNvbWJpbmVkYFxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHRvcGljRmlsdGVyID0gdG9waWMgPyBgXFxuICAgIFJFUVVJUkVEIFRPUElDOiBGb2N1cyBPTkxZIG9uIFwiJHt0b3BpY31cIiBwcm9ibGVtcy5cXG5gIDogJydcclxuXHJcbiAgICBjb25zdCBwcm9tcHQgPSBgR2VuZXJhdGUgYSBtdWx0aXBsZSBjaG9pY2UgbWF0aCB3b3JkIHByb2JsZW0gc3VpdGFibGUgZm9yIFByaW1hcnkgNSBzdHVkZW50cyAoYWdlIDEwLTExKSBmb2xsb3dpbmcgdGhlIFNpbmdhcG9yZSBQcmltYXJ5IE1hdGhlbWF0aWNzIFN5bGxhYnVzLlxyXG5cclxuICAgICR7ZGlmZmljdWx0eUluc3RydWN0aW9uc1tzZWxlY3RlZERpZmZpY3VsdHldfVxyXG4gICAgJHt0b3BpY0ZpbHRlcn1cclxuICAgIENVUlJJQ1VMVU0gUkVRVUlSRU1FTlRTIC0gQ2hvb3NlIE9ORSB0b3BpYyBmcm9tOlxyXG5cclxuICAgIE5VTUJFUiAmIEFMR0VCUkE6XHJcbiAgICAtIFdob2xlIG51bWJlcnMgKHVwIHRvIDEwIG1pbGxpb24sIG9yZGVyIG9mIG9wZXJhdGlvbnMgd2l0aCBicmFja2V0cylcclxuICAgIC0gRnJhY3Rpb25zIChmb3VyIG9wZXJhdGlvbnMsIGVzcGVjaWFsbHkgbXVsdGlwbGljYXRpb24gYnkgd2hvbGUgbnVtYmVycyBhbmQgcHJvcGVyIGZyYWN0aW9ucylcclxuICAgIC0gRGVjaW1hbHMgKG11bHRpcGx5aW5nL2RpdmlkaW5nIGJ5IDEwLzEwMC8xMDAwLCBjb252ZXJ0aW5nIG1lYXN1cmVtZW50cylcclxuICAgIC0gUGVyY2VudGFnZSAoZmluZGluZyBwZXJjZW50YWdlIG9mIHdob2xlLCBkaXNjb3VudCwgR1NULCBhbm51YWwgaW50ZXJlc3QpXHJcbiAgICAtIFJhdGUgcHJvYmxlbXMgKHF1YW50aXR5IHBlciB1bml0IG9mIGFub3RoZXIgcXVhbnRpdHkpXHJcblxyXG4gICAgTUVBU1VSRU1FTlQgJiBHRU9NRVRSWTpcclxuICAgIC0gQXJlYSBvZiB0cmlhbmdsZSAodXNpbmcgYmFzZSDDlyBoZWlnaHQgw7cgMiwgY29tcG9zaXRlIGZpZ3VyZXMpXHJcbiAgICAtIFZvbHVtZSBvZiBjdWJlL2N1Ym9pZCAoaW5jbHVkaW5nIGxpcXVpZCB2b2x1bWUsIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIOKEkyBhbmQgY23CsylcclxuICAgIC0gQW5nbGVzIChvbiBzdHJhaWdodCBsaW5lcywgYXQgcG9pbnRzLCB2ZXJ0aWNhbGx5IG9wcG9zaXRlLCBmaW5kaW5nIHVua25vd25zKVxyXG4gICAgLSBQcm9wZXJ0aWVzIG9mIHRyaWFuZ2xlcyAoaXNvc2NlbGVzLCBlcXVpbGF0ZXJhbCwgcmlnaHQtYW5nbGVkLCBhbmdsZSBzdW0pXHJcbiAgICAtIFByb3BlcnRpZXMgb2YgcXVhZHJpbGF0ZXJhbHMgKHBhcmFsbGVsb2dyYW0sIHJob21idXMsIHRyYXBleml1bSlcclxuXHJcbiAgICBQUk9CTEVNIERFU0lHTiBQUklOQ0lQTEVTOlxyXG4gICAgLSBVc2UgcmVhbGlzdGljLCBhZ2UtYXBwcm9wcmlhdGUgY29udGV4dHMgZnJvbSBldmVyeWRheSBsaWZlXHJcbiAgICAtIEZvY3VzIG9uIGNvbmNlcHR1YWwgdW5kZXJzdGFuZGluZywgbm90IGp1c3QgcHJvY2VkdXJhbCBza2lsbHNcclxuICAgIC0gRW5jb3VyYWdlIG1hdGhlbWF0aWNhbCByZWFzb25pbmcgYW5kIHByb2JsZW0tc29sdmluZ1xyXG4gICAgLSBOdW1iZXJzIHNob3VsZCBiZSB3aXRoaW4gc3R1ZGVudHMnIGNvbXB1dGF0aW9uYWwgYWJpbGl0eVxyXG5cclxuICAgIElNUE9SVEFOVDogRmlyc3Qgc29sdmUgdGhlIHByb2JsZW0gc3RlcCBieSBzdGVwIHRvIGVuc3VyZSB5b3UgZ2V0IHRoZSBjb3JyZWN0IGFuc3dlci5cclxuICAgIFRoZW4gY3JlYXRlIDMgcGxhdXNpYmxlIHdyb25nIGFuc3dlcnMgKGRpc3RyYWN0b3JzKSBiYXNlZCBvbiBjb21tb24gc3R1ZGVudCBlcnJvcnMuXHJcblxyXG4gICAgUmV0dXJuIE9OTFkgYSB2YWxpZCBKU09OIG9iamVjdCB3aXRoIHRoaXMgZXhhY3Qgc3RydWN0dXJlIChubyBtYXJrZG93biwgbm8gY29kZSBibG9ja3MpOlxyXG4gICAge1xyXG4gICAgICBcInByb2JsZW1fdGV4dFwiOiBcIkEgZGV0YWlsZWQgd29yZCBwcm9ibGVtIGluIGEgcmVhbC13b3JsZCBjb250ZXh0XCIsXHJcbiAgICAgIFwidG9waWNcIjogXCJPbmUgb2Y6IFdob2xlIE51bWJlcnMsIEZyYWN0aW9ucywgRGVjaW1hbHMsIFBlcmNlbnRhZ2UsIFJhdGUsIEFyZWEsIFZvbHVtZSwgQW5nbGVzLCBUcmlhbmdsZXMsIFF1YWRyaWxhdGVyYWxzXCIsXHJcbiAgICAgIFwiZGlmZmljdWx0eVwiOiBcIiR7c2VsZWN0ZWREaWZmaWN1bHR5fVwiLFxyXG4gICAgICBcIm9wdGlvbnNcIjogW1xyXG4gICAgICAgIHtcInRleHRcIjogXCJPcHRpb24gQVwiLCBcInZhbHVlXCI6IDEwfSxcclxuICAgICAgICB7XCJ0ZXh0XCI6IFwiT3B0aW9uIEJcIiwgXCJ2YWx1ZVwiOiAyMH0sXHJcbiAgICAgICAge1widGV4dFwiOiBcIk9wdGlvbiBDXCIsIFwidmFsdWVcIjogMzB9LFxyXG4gICAgICAgIHtcInRleHRcIjogXCJPcHRpb24gRFwiLCBcInZhbHVlXCI6IDQwfVxyXG4gICAgICBdLFxyXG4gICAgICBcImNvcnJlY3RfYW5zd2VyXCI6IDIwLFxyXG4gICAgICBcInNvbHV0aW9uX3N0ZXBzXCI6IFwiQ2xlYXIgc3RlcC1ieS1zdGVwIGNhbGN1bGF0aW9uIHNob3dpbmcgd29ya2luZ1wiLFxyXG4gICAgICBcImhpbnRcIjogXCJBIGhlbHBmdWwgaGludCB0aGF0IGd1aWRlcyB0b3dhcmQgdGhlIHNvbHV0aW9uIHdpdGhvdXQgcmV2ZWFsaW5nIHRoZSBhbnN3ZXJcIlxyXG4gICAgfVxyXG5cclxuICAgIFZBTElEQVRJT04gQ0hFQ0tMSVNUOlxyXG4gICAgLSBjb3JyZWN0X2Fuc3dlciBNVVNUIG1hdGNoIG9uZSBvcHRpb24gdmFsdWUgZXhhY3RseVxyXG4gICAgLSBBbGwgb3B0aW9uIHZhbHVlcyBhcmUgbnVtYmVycyAobm90IHN0cmluZ3MpXHJcbiAgICAtIERpc3RyYWN0b3JzIHJlcHJlc2VudCBjb21tb24gbWlzY29uY2VwdGlvbnMgKGUuZy4sIGZvcmdldHRpbmcgdG8gY2FycnksIHdyb25nIG9wZXJhdGlvbiwgcGFydGlhbCBjYWxjdWxhdGlvbilcclxuICAgIC0gQW5zd2VyIGlzIG1hdGhlbWF0aWNhbGx5IENPUlJFQ1QgcGVyIHNvbHV0aW9uX3N0ZXBzXHJcbiAgICAtIFByb2JsZW0gdGV4dCBpcyBjbGVhciwgdW5hbWJpZ3VvdXMsIGFuZCBhZ2UtYXBwcm9wcmlhdGVcclxuXHJcbiAgICBFeGFtcGxlIChXaG9sZSBOdW1iZXJzKTpcclxuICAgIFByb2JsZW06IEEgc2Nob29sIGxpYnJhcnkgaGFzIDIsNDUwIGJvb2tzLiBEdXJpbmcgdGhlIGJvb2sgZmFpciwgdGhleSBib3VnaHQgMzg1IG5ldyBib29rcyBhbmQgZG9uYXRlZCAxMjcgb2xkIGJvb2tzIHRvIGNoYXJpdHkuIEhvdyBtYW55IGJvb2tzIGRvZXMgdGhlIGxpYnJhcnkgaGF2ZSBub3c/XHJcbiAgICBTb2x1dGlvbjogMiw0NTAgKyAzODUgLSAxMjcgPSAyLDgzNSAtIDEyNyA9IDIsNzA4XHJcbiAgICBPcHRpb25zOiBbMiw1NjIgKGZvcmdvdCBkb25hdGlvbiksIDIsNzA4IChjb3JyZWN0KSwgMiw4MzUgKGZvcmdvdCBzdWJ0cmFjdGlvbiksIDIsOTU4IChhZGRlZCBhbGwpXVxyXG5cclxuICAgIERvdWJsZS1jaGVjayB5b3VyIGFyaXRobWV0aWMgYmVmb3JlIHJlc3BvbmRpbmchYFxyXG5cclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG1vZGVsLmdlbmVyYXRlQ29udGVudChwcm9tcHQpXHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlc3VsdC5yZXNwb25zZVxyXG4gICAgY29uc3QgdGV4dCA9IHJlc3BvbnNlLnRleHQoKVxyXG5cclxuICAgIC8vIFBhcnNlIHRoZSBBSSByZXNwb25zZVxyXG4gICAgbGV0IHByb2JsZW1EYXRhXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBDbGVhbiB0aGUgcmVzcG9uc2UgLSByZW1vdmUgbWFya2Rvd24gY29kZSBibG9ja3MgaWYgcHJlc2VudFxyXG4gICAgICBjb25zdCBjbGVhbmVkVGV4dCA9IHRleHQucmVwbGFjZSgvYGBganNvblxcbj8vZywgJycpLnJlcGxhY2UoL2BgYFxcbj8vZywgJycpLnRyaW0oKVxyXG4gICAgICBwcm9ibGVtRGF0YSA9IEpTT04ucGFyc2UoY2xlYW5lZFRleHQpXHJcbiAgICB9IGNhdGNoIChwYXJzZUVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBwYXJzZSBBSSByZXNwb25zZTonLCB0ZXh0KVxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgQUkgcmVzcG9uc2UgZm9ybWF0JylcclxuICAgIH1cclxuXHJcbiAgICAvLyBWYWxpZGF0ZSB0aGUgcmVzcG9uc2Ugc3RydWN0dXJlXHJcbiAgICBpZiAoIXByb2JsZW1EYXRhLnByb2JsZW1fdGV4dCB8fCAhcHJvYmxlbURhdGEub3B0aW9ucyB8fCAhQXJyYXkuaXNBcnJheShwcm9ibGVtRGF0YS5vcHRpb25zKSB8fCBcclxuICAgICAgICBwcm9ibGVtRGF0YS5vcHRpb25zLmxlbmd0aCAhPT0gNCB8fCB0eXBlb2YgcHJvYmxlbURhdGEuY29ycmVjdF9hbnN3ZXIgIT09ICdudW1iZXInKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBwcm9ibGVtIGRhdGEgc3RydWN0dXJlJylcclxuICAgIH1cclxuXHJcbiAgICAvLyBWYWxpZGF0ZSB0aGF0IGNvcnJlY3RfYW5zd2VyIG1hdGNoZXMgb25lIG9mIHRoZSBvcHRpb25zXHJcbiAgICBjb25zdCBvcHRpb25WYWx1ZXMgPSBwcm9ibGVtRGF0YS5vcHRpb25zLm1hcChvcHQgPT4gb3B0LnZhbHVlKVxyXG4gICAgaWYgKCFvcHRpb25WYWx1ZXMuaW5jbHVkZXMocHJvYmxlbURhdGEuY29ycmVjdF9hbnN3ZXIpKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ29ycmVjdCBhbnN3ZXIgZG9lcyBub3QgbWF0Y2ggYW55IG9wdGlvbicpXHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2F2ZSB0byBkYXRhYmFzZVxyXG4gICAgY29uc3QgeyBkYXRhOiBzZXNzaW9uLCBlcnJvcjogZGJFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ21hdGhfcHJvYmxlbV9zZXNzaW9ucycpXHJcbiAgICAgIC5pbnNlcnQoe1xyXG4gICAgICAgIHByb2JsZW1fdGV4dDogcHJvYmxlbURhdGEucHJvYmxlbV90ZXh0LFxyXG4gICAgICAgIGNvcnJlY3RfYW5zd2VyOiBwcm9ibGVtRGF0YS5jb3JyZWN0X2Fuc3dlcixcclxuICAgICAgICBvcHRpb25zOiBwcm9ibGVtRGF0YS5vcHRpb25zLFxyXG4gICAgICAgIGRpZmZpY3VsdHk6IHNlbGVjdGVkRGlmZmljdWx0eSxcclxuICAgICAgICB0b3BpYzogcHJvYmxlbURhdGEudG9waWMgfHwgbnVsbCxcclxuICAgICAgICBoaW50X3RleHQ6IHByb2JsZW1EYXRhLmhpbnQgfHwgbnVsbCxcclxuICAgICAgICBzb2x1dGlvbl9zdGVwczogcHJvYmxlbURhdGEuc29sdXRpb25fc3RlcHMgfHwgbnVsbCxcclxuICAgICAgICB1c2VyX2lkOiB1c2VyX2lkXHJcbiAgICAgIH0pXHJcbiAgICAgIC5zZWxlY3QoKVxyXG4gICAgICAuc2luZ2xlKClcclxuXHJcbiAgICBpZiAoZGJFcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSBlcnJvcjonLCBkYkVycm9yKVxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBzYXZlIHByb2JsZW0gdG8gZGF0YWJhc2UnKVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIHNlc3Npb25faWQ6IHNlc3Npb24uaWQsXHJcbiAgICAgIHByb2JsZW1fdGV4dDogc2Vzc2lvbi5wcm9ibGVtX3RleHQsXHJcbiAgICAgIGZpbmFsX2Fuc3dlcjogc2Vzc2lvbi5jb3JyZWN0X2Fuc3dlcixcclxuICAgICAgb3B0aW9uczogc2Vzc2lvbi5vcHRpb25zLFxyXG4gICAgICBkaWZmaWN1bHR5OiBzZXNzaW9uLmRpZmZpY3VsdHksXHJcbiAgICAgIHRvcGljOiBzZXNzaW9uLnRvcGljLFxyXG4gICAgICBoaW50OiBzZXNzaW9uLmhpbnRfdGV4dFxyXG4gICAgfSlcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdlbmVyYXRpbmcgcHJvYmxlbTonLCBlcnJvcilcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBlcnJvcjogJ0ZhaWxlZCB0byBnZW5lcmF0ZSBwcm9ibGVtLiBQbGVhc2UgdHJ5IGFnYWluLicgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApXHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJHb29nbGVHZW5lcmF0aXZlQUkiLCJzdXBhYmFzZSIsIk5leHRSZXNwb25zZSIsImdlbkFJIiwicHJvY2VzcyIsImVudiIsIkdPT0dMRV9BUElfS0VZIiwiUE9TVCIsInJlcXVlc3QiLCJib2R5IiwianNvbiIsImNhdGNoIiwiZGlmZmljdWx0eSIsInRvcGljIiwidXNlcl9pZCIsInZhbGlkRGlmZmljdWx0aWVzIiwic2VsZWN0ZWREaWZmaWN1bHR5IiwiaW5jbHVkZXMiLCJtb2RlbCIsImdldEdlbmVyYXRpdmVNb2RlbCIsImRpZmZpY3VsdHlJbnN0cnVjdGlvbnMiLCJlYXN5IiwibWVkaXVtIiwiaGFyZCIsInRvcGljRmlsdGVyIiwicHJvbXB0IiwicmVzdWx0IiwiZ2VuZXJhdGVDb250ZW50IiwicmVzcG9uc2UiLCJ0ZXh0IiwicHJvYmxlbURhdGEiLCJjbGVhbmVkVGV4dCIsInJlcGxhY2UiLCJ0cmltIiwiSlNPTiIsInBhcnNlIiwicGFyc2VFcnJvciIsImNvbnNvbGUiLCJlcnJvciIsIkVycm9yIiwicHJvYmxlbV90ZXh0Iiwib3B0aW9ucyIsIkFycmF5IiwiaXNBcnJheSIsImxlbmd0aCIsImNvcnJlY3RfYW5zd2VyIiwib3B0aW9uVmFsdWVzIiwibWFwIiwib3B0IiwidmFsdWUiLCJkYXRhIiwic2Vzc2lvbiIsImRiRXJyb3IiLCJmcm9tIiwiaW5zZXJ0IiwiaGludF90ZXh0IiwiaGludCIsInNvbHV0aW9uX3N0ZXBzIiwic2VsZWN0Iiwic2luZ2xlIiwic2Vzc2lvbl9pZCIsImlkIiwiZmluYWxfYW5zd2VyIiwic3RhdHVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/generate-problem/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabaseClient.ts":
/*!*******************************!*\
  !*** ./lib/supabaseClient.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabase: () => (/* binding */ supabase)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst supabaseUrl = \"https://qjrtfzzfrfeopzsndhcx.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFqcnRmenpmcmZlb3B6c25kaGN4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk2NDQzNzQsImV4cCI6MjA3NTIyMDM3NH0.F_TNrNkCjPaNlWUu6Q0M60TEtpU995ALiyp5wrWDkOE\";\nif (!supabaseUrl || !supabaseAnonKey) {\n    throw new Error(\"Missing Supabase environment variables\");\n}\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2VDbGllbnQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBb0Q7QUFFcEQsTUFBTUMsY0FBY0MsMENBQW9DO0FBQ3hELE1BQU1HLGtCQUFrQkgsa05BQXlDO0FBRWpFLElBQUksQ0FBQ0QsZUFBZSxDQUFDSSxpQkFBaUI7SUFDcEMsTUFBTSxJQUFJRSxNQUFNO0FBQ2xCO0FBRU8sTUFBTUMsV0FBV1IsbUVBQVlBLENBQUNDLGFBQWFJLGlCQUFnQiIsInNvdXJjZXMiOlsid2VicGFjazovL21hdGgtcHJvYmxlbS1nZW5lcmF0b3IvLi9saWIvc3VwYWJhc2VDbGllbnQudHM/M2E3ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnXHJcblxyXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTFxyXG5jb25zdCBzdXBhYmFzZUFub25LZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWVxyXG5cclxuaWYgKCFzdXBhYmFzZVVybCB8fCAhc3VwYWJhc2VBbm9uS2V5KSB7XHJcbiAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIFN1cGFiYXNlIGVudmlyb25tZW50IHZhcmlhYmxlcycpXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5KVxyXG5cclxuZXhwb3J0IHR5cGUgRGF0YWJhc2UgPSB7XHJcbiAgcHVibGljOiB7XHJcbiAgICBUYWJsZXM6IHtcclxuICAgICAgbWF0aF9wcm9ibGVtX3Nlc3Npb25zOiB7XHJcbiAgICAgICAgUm93OiB7XHJcbiAgICAgICAgICBpZDogc3RyaW5nXHJcbiAgICAgICAgICBjcmVhdGVkX2F0OiBzdHJpbmdcclxuICAgICAgICAgIHByb2JsZW1fdGV4dDogc3RyaW5nXHJcbiAgICAgICAgICBjb3JyZWN0X2Fuc3dlcjogbnVtYmVyXHJcbiAgICAgICAgfVxyXG4gICAgICAgIEluc2VydDoge1xyXG4gICAgICAgICAgaWQ/OiBzdHJpbmdcclxuICAgICAgICAgIGNyZWF0ZWRfYXQ/OiBzdHJpbmdcclxuICAgICAgICAgIHByb2JsZW1fdGV4dDogc3RyaW5nXHJcbiAgICAgICAgICBjb3JyZWN0X2Fuc3dlcjogbnVtYmVyXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFVwZGF0ZToge1xyXG4gICAgICAgICAgaWQ/OiBzdHJpbmdcclxuICAgICAgICAgIGNyZWF0ZWRfYXQ/OiBzdHJpbmdcclxuICAgICAgICAgIHByb2JsZW1fdGV4dD86IHN0cmluZ1xyXG4gICAgICAgICAgY29ycmVjdF9hbnN3ZXI/OiBudW1iZXJcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgbWF0aF9wcm9ibGVtX3N1Ym1pc3Npb25zOiB7XHJcbiAgICAgICAgUm93OiB7XHJcbiAgICAgICAgICBpZDogc3RyaW5nXHJcbiAgICAgICAgICBzZXNzaW9uX2lkOiBzdHJpbmdcclxuICAgICAgICAgIHVzZXJfYW5zd2VyOiBudW1iZXJcclxuICAgICAgICAgIGlzX2NvcnJlY3Q6IGJvb2xlYW5cclxuICAgICAgICAgIGZlZWRiYWNrX3RleHQ6IHN0cmluZ1xyXG4gICAgICAgIH1cclxuICAgICAgICBJbnNlcnQ6IHtcclxuICAgICAgICAgIGlkPzogc3RyaW5nXHJcbiAgICAgICAgICBzZXNzaW9uX2lkOiBzdHJpbmdcclxuICAgICAgICAgIHVzZXJfYW5zd2VyOiBudW1iZXJcclxuICAgICAgICAgIGlzX2NvcnJlY3Q6IGJvb2xlYW5cclxuICAgICAgICAgIGZlZWRiYWNrX3RleHQ6IHN0cmluZ1xyXG4gICAgICAgIH1cclxuICAgICAgICBVcGRhdGU6IHtcclxuICAgICAgICAgIGlkPzogc3RyaW5nXHJcbiAgICAgICAgICBzZXNzaW9uX2lkPzogc3RyaW5nXHJcbiAgICAgICAgICB1c2VyX2Fuc3dlcj86IG51bWJlclxyXG4gICAgICAgICAgaXNfY29ycmVjdD86IGJvb2xlYW5cclxuICAgICAgICAgIGZlZWRiYWNrX3RleHQ/OiBzdHJpbmdcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn0iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50Iiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VBbm9uS2V5IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJFcnJvciIsInN1cGFiYXNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabaseClient.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/webidl-conversions","vendor-chunks/@google"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-problem%2Froute&page=%2Fapi%2Fgenerate-problem%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-problem%2Froute.ts&appDir=C%3A%5CUsers%5Calexa%5CDesktop%5COttodot%5Cottodot-coding-task-full-stack%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Calexa%5CDesktop%5COttodot%5Cottodot-coding-task-full-stack&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();